sudo: false
git:
  depth: 1
# https://github.com/hvr/multi-ghc-travis
addons:
  apt:
    sources: hvr-ghc
    packages:
      - cabal-install-1.22
      - ghc-7.10.2
      - alex-3.1.4
      - happy-1.19.5
language: node_js
branches:
  except: /^v\d/
node_js: node
before_install:
  - export PATH="/opt/ghc/7.10.2/bin:$PATH"
  - export PATH="/opt/cabal/1.22/bin:$PATH"
  - export PATH="$HOME/.cabal/bin:$PATH"
  - export PATH="/opt/happy/1.19.5/bin:/$PATH"
  - export PATH="/opt/alex/3.1.4/bin:/$PATH"
  - cabal --version
  - echo "$(ghc --version) [$(ghc --print-project-git-commit-id 2> /dev/null || echo '?')]"
script:
  - npm run-script pretest
  - npm run-script coverage
after_script:
  - npm install istanbul-coveralls
  - node node_modules/.bin/istanbul-coveralls
notifications:
  email: false
